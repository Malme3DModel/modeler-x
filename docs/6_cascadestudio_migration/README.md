# CascadeStudioå®Œå…¨ã‚³ãƒ”ãƒ¼ç§»è¡Œè¨ˆç”»æ›¸

## 1. ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆæ¦‚è¦

### 1.1 ç¾åœ¨ã®é”æˆçŠ¶æ³
**âœ… ãƒ•ã‚§ãƒ¼ã‚º7å®Ÿè£…å®Œäº†ï¼ˆ2025å¹´6æœˆ15æ—¥ç¾åœ¨ï¼‰**
- âœ… **åŸºæœ¬CADæ©Ÿèƒ½**: 100%å®Œäº†
- âœ… **WebWorkerçµ±åˆ**: 100%å®Œäº†  
- âœ… **React Three Fiber**: 100%å®Œäº†
- âœ… **Monaco Editor**: 100%å®Œäº†
- âœ… **ãƒ•ã‚¡ã‚¤ãƒ«I/O**: STEP/STL/OBJå¯¾å¿œå®Œäº†
- âœ… **Golden LayoutåŸºç›¤**: 100%å®Œäº†
- âœ… **CascadeStudioé¢¨ãƒ¬ã‚¤ã‚¢ã‚¦ãƒˆ**: 100%å®Œäº†
- âœ… **ãƒ•ãƒ­ãƒ¼ãƒ†ã‚£ãƒ³ã‚°GUIé…ç½®**: 100%å®Œäº†
- âœ… **Monacoç·¨é›†æ©Ÿèƒ½**: 100%å®Œäº†ï¼ˆF5/Ctrl+Sã‚­ãƒ¼ãƒã‚¤ãƒ³ãƒ‰å®Ÿè£…ï¼‰
- âœ… **URLçŠ¶æ…‹ç®¡ç†**: 100%å®Œäº†ï¼ˆBase64ã‚¨ãƒ³ã‚³ãƒ¼ãƒ‰å®Ÿè£…ï¼‰
- âœ… **Playwrightè‡ªå‹•ãƒ†ã‚¹ãƒˆ**: 100%å®Œäº†
- âœ… **Tweakpane GUIçµ±åˆ**: 100%å®Œäº†ï¼ˆTweakpane 4.0.1å¯¾å¿œï¼‰
- âœ… **CADãƒ¯ãƒ¼ã‚«ãƒ¼é€£æº**: 100%å®Œäº†
- âœ… **ãƒˆãƒƒãƒ—ãƒŠãƒ“ã‚²ãƒ¼ã‚·ãƒ§ãƒ³**: 100%å®Œäº†ï¼ˆCascadeNavigationå®Ÿè£…ï¼‰
- âœ… **3Dãƒ“ãƒ¥ãƒ¼ãƒãƒ¼ãƒˆæ©Ÿèƒ½**: 100%å®Œäº†ï¼ˆCascadeViewportå®Ÿè£…ï¼‰
- âœ… **ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆç®¡ç†**: 100%å®Œäº†ï¼ˆä¿å­˜/èª­ã¿è¾¼ã¿æ©Ÿèƒ½ï¼‰
- âœ… **ãƒ•ã‚¡ã‚¤ãƒ«ã‚¨ã‚¯ã‚¹ãƒãƒ¼ãƒˆ**: 100%å®Œäº†ï¼ˆSTEP/STL/OBJå¯¾å¿œï¼‰

**ã‚¢ã‚¯ã‚»ã‚¹å…ˆ**: `http://localhost:3000/cascade-studio`

### 1.2 å®Œå…¨ã‚³ãƒ”ãƒ¼ã®ç›®æ¨™
**CascadeStudio (docs/template) ã¨ã®100%æ©Ÿèƒ½ãƒ»UIä¸€è‡´**
- âœ… **Golden Layouté¢¨ã®ãƒ‰ãƒƒã‚­ãƒ³ã‚°ã‚·ã‚¹ãƒ†ãƒ ** â† **å®Œäº†ï¼**
- âœ… **Monaco Editorã®æ©Ÿèƒ½ã¨ã‚­ãƒ¼ãƒã‚¤ãƒ³ãƒ‰** â† **å®Œäº†ï¼**
- âœ… **URLçŠ¶æ…‹ç®¡ç†ã¨ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆå…±æœ‰** â† **å®Œäº†ï¼**
- âœ… **Tweakpaneé¢¨ã®GUIã‚³ãƒ³ãƒˆãƒ­ãƒ¼ãƒ«** â† **å®Œäº†ï¼**
- âœ… **CascadeStudioé¢¨ã®ãƒˆãƒƒãƒ—ãƒŠãƒ“ã‚²ãƒ¼ã‚·ãƒ§ãƒ³** â† **å®Œäº†ï¼**
- âœ… **CascadeStudioé¢¨ã®3Dãƒ“ãƒ¥ãƒ¼ãƒãƒ¼ãƒˆè¨­å®š** â† **å®Œäº†ï¼**
- âœ… **ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆç®¡ç†ã¨ãƒ•ã‚¡ã‚¤ãƒ«I/O** â† **å®Œäº†ï¼**

## ğŸš¨ **æ–°ç™ºè¦‹ãƒŠãƒ¬ãƒƒã‚¸**

### 1. React Three Fiberã¨ã®çµ±åˆæ–¹æ³•

React Three Fiberã‚’ä½¿ç”¨ã—ã¦3Dãƒ“ãƒ¥ãƒ¼ãƒãƒ¼ãƒˆã‚’å®Ÿè£…ã™ã‚‹ã“ã¨ã§ã€Three.jsã®ãƒ¬ãƒ³ãƒ€ãƒªãƒ³ã‚°èƒ½åŠ›ã¨Reactã®å®£è¨€çš„ãªã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆãƒ¢ãƒ‡ãƒ«ã‚’çµ„ã¿åˆã‚ã›ã‚‹ã“ã¨ãŒã§ãã¾ã—ãŸã€‚ä¸»ãªãƒã‚¤ãƒ³ãƒˆã¯ä»¥ä¸‹ã®é€šã‚Šã§ã™ï¼š

```typescript
// components/threejs/CascadeViewport.tsx
export default function CascadeViewport({ 
  shapes = [], 
  viewSettings = {}
}: CascadeViewportProps) {
  return (
    <div style={{ width: '100%', height: '100%' }}>
      <Canvas shadows gl={{ antialias: true }}
        style={{ background: viewSettings.backgroundColor || '#2d3748' }}
      >
        <SceneSetup viewSettings={viewSettings} />
        
        {/* CADã‚·ã‚§ã‚¤ãƒ—ã‚’è¡¨ç¤º */}
        {shapes.map((shape, i) => (
          <ShapeMesh key={i} shape={shape} wireframe={viewSettings.wireframe} />
        ))}
      </Canvas>
    </div>
  );
}
```

ã“ã®å®Ÿè£…ã«ã‚ˆã‚Šã€CascadeStudioã®CADãƒ¯ãƒ¼ã‚«ãƒ¼ã‹ã‚‰å–å¾—ã—ãŸã‚¸ã‚ªãƒ¡ãƒˆãƒªãƒ‡ãƒ¼ã‚¿ã‚’Three.jsã®ã‚¸ã‚ªãƒ¡ãƒˆãƒªã«å¤‰æ›ã—ã€åŠ¹ç‡çš„ã«è¡¨ç¤ºã™ã‚‹ã“ã¨ãŒã§ãã¾ã™ã€‚

### 2. CascadeNavigationã®å®Ÿè£…æ–¹æ³•

Golden Layoutã®ä¸Šéƒ¨ã«ãƒŠãƒ“ã‚²ãƒ¼ã‚·ãƒ§ãƒ³ãƒãƒ¼ã‚’å®Ÿè£…ã™ã‚‹ã“ã¨ã§ã€CascadeStudioã®æ“ä½œæ„Ÿã‚’å†ç¾ã—ã¾ã—ãŸï¼š

```typescript
// components/layout/CascadeNavigation.tsx
export default function CascadeNavigation({
  onExport,
  onNewProject,
  onSaveProject,
  onLoadProject,
  onImportFiles,
  onClearImported
}: NavigationProps) {
  // ...
  
  return (
    <nav className="flex items-center justify-between p-2 bg-gray-900 text-white shadow-md">
      <div className="flex items-center">
        <h1 className="text-xl font-bold mr-4">Cascade Studio</h1>
        
        {/* ãƒ•ã‚¡ã‚¤ãƒ«ãƒ¡ãƒ‹ãƒ¥ãƒ¼ */}
        <DropdownMenu
          label="File"
          items={[
            { label: 'New Project', onClick: onNewProject || (() => console.log('New Project')) },
            { label: 'Save Project', onClick: onSaveProject || (() => console.log('Save Project')) },
            { label: 'Load Project', onClick: onLoadProject || (() => console.log('Load Project')) },
            { label: 'Import STEP/IGES/STL', onClick: handleFileImport }
          ]}
        />
        
        {/* ã‚¨ã‚¯ã‚¹ãƒãƒ¼ãƒˆãƒ¡ãƒ‹ãƒ¥ãƒ¼ */}
        <DropdownMenu
          label="Export"
          items={[
            { label: 'Export STEP', onClick: () => onExport ? onExport('step') : console.log('Export STEP') },
            { label: 'Export STL', onClick: () => onExport ? onExport('stl') : console.log('Export STL') },
            { label: 'Export OBJ', onClick: () => onExport ? onExport('obj') : console.log('Export OBJ') }
          ]}
        />
        
        {/* ãã®ä»–ã®ãƒ¡ãƒ‹ãƒ¥ãƒ¼... */}
      </div>
    </nav>
  );
}
```

### 3. Tweakpane 4.0.1ã®å¯¾å¿œæ–¹æ³•

Tweakpane 4.0.1ã§ã¯ã€APIã®ä¸€éƒ¨ãŒå¤‰æ›´ã•ã‚Œã¦ã„ã¾ã™ã€‚ç‰¹ã«é‡è¦ãªç‚¹ã¯ä»¥ä¸‹ã®é€šã‚Šã§ã™ï¼š

- `addInput`ãƒ¡ã‚½ãƒƒãƒ‰ãŒ`addBinding`ã«å¤‰æ›´ã•ã‚Œã¾ã—ãŸ
- GUIã‚³ãƒ³ãƒˆãƒ­ãƒ¼ãƒ«ã®è¿½åŠ æ–¹æ³•ãŒä»¥ä¸‹ã®ã‚ˆã†ã«å¤‰æ›´ã•ã‚Œã¦ã„ã¾ã™ï¼š

```typescript
// å¾“æ¥ã®Tweakpane
pane.addInput(guiState, 'propertyName', options);

// Tweakpane 4.0.1
pane.addBinding(guiState, 'propertyName', options);
```

ã“ã®å¤‰æ›´ã«å¯¾å¿œã™ã‚‹ãŸã‚ã«ã€`TweakpaneGUI.tsx`ã¨`CascadeGUIHandlers.ts`ã‚’æ›´æ–°ã—ã¾ã—ãŸã€‚

### 4. Monaco Editorã®WebWorkerã®è¨­å®šæ–¹æ³•

Monaco Editorã‚’æ­£ã—ãå‹•ä½œã•ã›ã‚‹ã«ã¯ã€å°‚ç”¨ã®WebWorkerã‚’è¨­å®šã™ã‚‹å¿…è¦ãŒã‚ã‚Šã¾ã™ã€‚ã“ã‚Œã¯ç‰¹ã«æ¬¡ã®ã‚¨ãƒ©ãƒ¼ã‚’è§£æ±ºã™ã‚‹ãŸã‚ã«é‡è¦ã§ã™ï¼š

```
Could not create web worker(s). Falling back to loading web worker code in main thread, which might cause UI freezes.
You must define a function MonacoEnvironment.getWorkerUrl or MonacoEnvironment.getWorker
```

#### è§£æ±ºæ–¹æ³•ï¼š

```typescript
// Monaco Editorã®ãƒ¯ãƒ¼ã‚«ãƒ¼è¨­å®š
if (typeof window !== 'undefined') {
  (window as any).MonacoEnvironment = {
    getWorkerUrl: function(_moduleId: string, label: string) {
      if (label === 'typescript' || label === 'javascript') {
        return '/monaco-editor-workers/ts.worker.js';
      }
      return '/monaco-editor-workers/editor.worker.js';
    },
    // ãƒ¯ãƒ¼ã‚«ãƒ¼ã‚ªãƒ—ã‚·ãƒ§ãƒ³ã‚’æä¾›ã™ã‚‹é–¢æ•°ï¼ˆclassicã‚¿ã‚¤ãƒ—ã§ä½œæˆï¼‰
    getWorkerOptions: function() {
      return {
        type: 'classic' // ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«ã‚¹ã‚¯ãƒªãƒ—ãƒˆã§ã¯importScriptsãŒä½¿ãˆãªã„ãŸã‚classicã‚’ä½¿ç”¨
      };
    }
  };
}
```

ãã—ã¦ã€`public/monaco-editor-workers/`ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªã«ä»¥ä¸‹ã®ãƒ¯ãƒ¼ã‚«ãƒ¼ãƒ•ã‚¡ã‚¤ãƒ«ã‚’ä½œæˆã—ã¾ã™ï¼š

```javascript
// editor.worker.js
self.MonacoEnvironment = {
  baseUrl: 'https://cdn.jsdelivr.net/npm/monaco-editor@0.35.0/min/'
};

importScripts('https://cdn.jsdelivr.net/npm/monaco-editor@0.35.0/min/vs/base/worker/workerMain.js');
```

```javascript
// ts.worker.js
self.MonacoEnvironment = {
  baseUrl: 'https://cdn.jsdelivr.net/npm/monaco-editor@0.35.0/min/'
};

importScripts('https://cdn.jsdelivr.net/npm/monaco-editor@0.35.0/min/vs/language/typescript/tsWorker.js');
```

### 5. URLçŠ¶æ…‹ç®¡ç†ã¨Base64ã‚¨ãƒ³ã‚³ãƒ¼ãƒ‡ã‚£ãƒ³ã‚°

#### å®Ÿè£…ã®åŸºæœ¬æ¦‚å¿µ
URLãƒãƒƒã‚·ãƒ¥ã‚’ä½¿ç”¨ã—ã¦ã‚³ãƒ¼ãƒ‰ã¨GUIçŠ¶æ…‹ã‚’ä¿å­˜ãƒ»å¾©å…ƒã™ã‚‹æ©Ÿèƒ½ãŒå®Ÿè£…ã•ã‚Œã¾ã—ãŸã€‚ã“ã®å®Ÿè£…ã§ã¯ã€JSONå½¢å¼ã®ãƒ‡ãƒ¼ã‚¿ã‚’UTF-8å¯¾å¿œã®Base64ã‚¨ãƒ³ã‚³ãƒ¼ãƒ‡ã‚£ãƒ³ã‚°ã§å¤‰æ›ã—ã€URLãƒãƒƒã‚·ãƒ¥ã¨ã—ã¦ä¿å­˜ã—ã¦ã„ã¾ã™ã€‚

```typescript
// URLStateManager - çŠ¶æ…‹ç®¡ç†ã®æ ¸å¿ƒéƒ¨åˆ†
static saveStateToURL(state: URLState): void {
  // JSONæ–‡å­—åˆ—åŒ–ã—ã¦Base64ã‚¨ãƒ³ã‚³ãƒ¼ãƒ‰
  const json = JSON.stringify(state);
  const encoded = this.encodeToBase64(json);
  
  // URLãƒãƒƒã‚·ãƒ¥ã‚’æ›´æ–°
  window.location.hash = encoded;
}
```

## 2. è©³ç´°æ©Ÿèƒ½æ¯”è¼ƒåˆ†æ

### 2.1 UIãƒ¬ã‚¤ã‚¢ã‚¦ãƒˆæ§‹é€ ã®æ¯”è¼ƒ

#### âœ… å®Ÿè£…å®Œäº†: CascadeStudioé¢¨Golden Layout
```
âœ… å®Ÿè£…æ¸ˆã¿ CascadeStudioé¢¨UI
â”œâ”€â”€ âœ… å·¦ãƒ‘ãƒãƒ«: Monaco Editorï¼ˆã‚³ãƒ¼ãƒ‰ã‚¨ãƒ‡ã‚£ã‚¿ãƒ¼ï¼‰
â”‚   â”œâ”€â”€ âœ… ã‚¿ã‚¤ãƒˆãƒ«: "* Untitled"
â”‚   â”œâ”€â”€ âœ… VS Codeé¢¨ãƒ€ãƒ¼ã‚¯ãƒ†ãƒ¼ãƒ
â”‚   â”œâ”€â”€ âœ… STARTER_CODEè¡¨ç¤º
â”‚   â”œâ”€â”€ âœ… F5ã‚­ãƒ¼å®Ÿè¡Œæ©Ÿèƒ½
â”‚   â””â”€â”€ âœ… Ctrl+Sã‚­ãƒ¼ä¿å­˜ï¼†å®Ÿè¡Œæ©Ÿèƒ½
â”œâ”€â”€ âœ… å³ä¸Šãƒ‘ãƒãƒ«: CAD Viewï¼ˆ3Dãƒ“ãƒ¥ãƒ¼ãƒãƒ¼ãƒˆï¼‰
â”‚   â”œâ”€â”€ âœ… ãƒ•ãƒ­ãƒ¼ãƒ†ã‚£ãƒ³ã‚°GUIé…ç½®ï¼ˆå³ä¸Šï¼‰
â”‚   â”œâ”€â”€ âœ… Tweakpane GUIã‚¨ãƒªã‚¢
â”‚   â”œâ”€â”€ âœ… React Three Fiberçµ±åˆ
â”‚   â”œâ”€â”€ âœ… ã‚«ãƒ¡ãƒ©ã‚³ãƒ³ãƒˆãƒ­ãƒ¼ãƒ«
â”‚   â””â”€â”€ âœ… è¡¨ç¤ºè¨­å®šï¼ˆãƒ¯ã‚¤ãƒ¤ãƒ¼ãƒ•ãƒ¬ãƒ¼ãƒ ã€ã‚°ãƒªãƒƒãƒ‰ã€è»¸è¡¨ç¤ºï¼‰
â”œâ”€â”€ âœ… å³ä¸‹ãƒ‘ãƒãƒ«: Consoleï¼ˆ20%é«˜ã•ï¼‰
â”‚   â”œâ”€â”€ âœ… CascadeStudioé¢¨ãƒ‡ã‚¶ã‚¤ãƒ³
â”‚   â”œâ”€â”€ âœ… Consolas ãƒ•ã‚©ãƒ³ãƒˆ
â”‚   â””â”€â”€ âœ… ã‚·ã‚¹ãƒ†ãƒ ãƒ­ã‚°è¡¨ç¤º
â””â”€â”€ âœ… ãƒˆãƒƒãƒ—ãƒŠãƒ“ã‚²ãƒ¼ã‚·ãƒ§ãƒ³
    â”œâ”€â”€ âœ… ãƒ•ã‚¡ã‚¤ãƒ«ãƒ¡ãƒ‹ãƒ¥ãƒ¼ï¼ˆæ–°è¦ã€ä¿å­˜ã€èª­ã¿è¾¼ã¿ï¼‰
    â”œâ”€â”€ âœ… ã‚¨ã‚¯ã‚¹ãƒãƒ¼ãƒˆãƒ¡ãƒ‹ãƒ¥ãƒ¼ï¼ˆSTEPã€STLã€OBJï¼‰
    â””â”€â”€ âœ… ç·¨é›†ãƒ¡ãƒ‹ãƒ¥ãƒ¼ï¼ˆã‚¤ãƒ³ãƒãƒ¼ãƒˆãƒ•ã‚¡ã‚¤ãƒ«ã‚¯ãƒªã‚¢ï¼‰
```

### 2.2 ä¸»è¦ãªä»•æ§˜å·®åˆ†ï¼ˆæ›´æ–°ï¼‰

| æ©Ÿèƒ½ã‚«ãƒ†ã‚´ãƒª | CascadeStudio | ç¾åœ¨ã®Next.jsã‚¢ãƒ—ãƒª | å·®åˆ†ãƒ¬ãƒ™ãƒ« | å®Ÿè£…çŠ¶æ³ |
|------------|---------------|-------------------|----------|---------|
| **ãƒ¬ã‚¤ã‚¢ã‚¦ãƒˆã‚·ã‚¹ãƒ†ãƒ ** | Golden Layout | Golden Layout V2 | âœ… å®Œäº† | âœ… **å®Œäº†** |
| **GUIè¦ç´ ** | Tweakpane | Tweakpane 4.0.1 | âœ… å®Œäº† | âœ… **å®Œäº†** |
| **ã‚¨ãƒ‡ã‚£ã‚¿ãƒ¼** | Monaco Editor | Monaco Editor | âœ… å®Œäº† | âœ… **å®Œäº†** |
| **ã‚³ãƒ³ã‚½ãƒ¼ãƒ«** | ãƒ‰ãƒƒã‚­ãƒ³ã‚°å¼ | ãƒ‰ãƒƒã‚­ãƒ³ã‚°å¼ | âœ… å®Œäº† | âœ… **å®Œäº†** |
| **URLç®¡ç†** | encode/decode | Base64 Encode/Decode | âœ… å®Œäº† | âœ… **å®Œäº†** |
| **ãƒˆãƒƒãƒ—ãƒŠãƒ“** | å°‚ç”¨ãƒ‡ã‚¶ã‚¤ãƒ³ | CascadeNavigation | âœ… å®Œäº† | âœ… **å®Œäº†** |
| **3Dãƒ“ãƒ¥ãƒ¼ãƒãƒ¼ãƒˆ** | ãƒ•ãƒ­ãƒ¼ãƒ†ã‚£ãƒ³ã‚°GUI | React Three Fiber | âœ… å®Œäº† | âœ… **å®Œäº†** |
| **ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆç®¡ç†** | JSON Layout | JSONä¿å­˜/èª­ã¿è¾¼ã¿ | âœ… å®Œäº† | âœ… **å®Œäº†** |
| **ãƒ•ã‚¡ã‚¤ãƒ«I/O** | STEP/STL | STEP/STL/OBJ | âœ… å®Œäº† | âœ… **å®Œäº†** |

## ğŸ”§ æŠ€è¡“å®Ÿè£…è©³ç´°ï¼ˆæœ€æ–°æƒ…å ±ï¼‰

### 1. CascadeViewportå®Ÿè£…

```typescript
// components/threejs/CascadeViewport.tsx ã®é‡è¦éƒ¨åˆ†
function ShapeMesh({ shape, wireframe = false }: ShapeMeshProps) {
  const meshRef = useRef<THREE.Mesh>(null);
  const edgesRef = useRef<THREE.LineSegments>(null);

  useEffect(() => {
    if (!shape) return;

    // ãƒ¡ãƒƒã‚·ãƒ¥ã®è¨­å®š
    if (shape.mesh && meshRef.current) {
      const { vertices, normals, indices } = shape.mesh;
      
      if (vertices && indices) {
        const geometry = new THREE.BufferGeometry();
        geometry.setAttribute('position', new THREE.Float32BufferAttribute(vertices, 3));
        
        if (normals) {
          geometry.setAttribute('normal', new THREE.Float32BufferAttribute(normals, 3));
        } else {
          geometry.computeVertexNormals();
        }
        
        geometry.setIndex(Array.from(indices));
        
        meshRef.current.geometry.dispose();
        meshRef.current.geometry = geometry;
      }
    }

    // ã‚¨ãƒƒã‚¸ã®è¨­å®š
    if (shape.edges && edgesRef.current) {
      const { vertices } = shape.edges;
      
      if (vertices) {
        const geometry = new THREE.BufferGeometry();
        geometry.setAttribute('position', new THREE.Float32BufferAttribute(vertices, 3));
        
        edgesRef.current.geometry.dispose();
        edgesRef.current.geometry = geometry;
      }
    }
  }, [shape]);

  return (
    <>
      {/* CADãƒ¡ãƒƒã‚·ãƒ¥ */}
      {shape.mesh && (
        <mesh ref={meshRef} castShadow receiveShadow>
          <bufferGeometry />
          <meshStandardMaterial 
            color="#6b9bd7" 
            roughness={0.5} 
            metalness={0.5}
            side={THREE.DoubleSide}
            wireframe={wireframe}
          />
        </mesh>
      )}

      {/* CADã‚¨ãƒƒã‚¸ */}
      {shape.edges && (
        <lineSegments ref={edgesRef}>
          <bufferGeometry />
          <lineBasicMaterial color="#000000" linewidth={1} />
        </lineSegments>
      )}
    </>
  );
}
```

### 2. CascadeNavigationå®Ÿè£…

```typescript
// components/layout/CascadeNavigation.tsx ã®é‡è¦éƒ¨åˆ†
export default function CascadeNavigation({
  onExport,
  onNewProject,
  onSaveProject,
  onLoadProject,
  onImportFiles,
  onClearImported
}: NavigationProps) {
  return (
    <nav className="flex items-center justify-between p-2 bg-gray-900 text-white shadow-md">
      <div className="flex items-center">
        <h1 className="text-xl font-bold mr-4">Cascade Studio</h1>
        
        {/* ãƒ•ã‚¡ã‚¤ãƒ«ãƒ¡ãƒ‹ãƒ¥ãƒ¼ */}
        <DropdownMenu
          label="File"
          items={[
            { label: 'New Project', onClick: onNewProject || (() => console.log('New Project')) },
            { label: 'Save Project', onClick: onSaveProject || (() => console.log('Save Project')) },
            { label: 'Load Project', onClick: onLoadProject || (() => console.log('Load Project')) },
            { label: 'Import STEP/IGES/STL', onClick: handleFileImport }
          ]}
        />
        
        {/* ã‚¨ã‚¯ã‚¹ãƒãƒ¼ãƒˆãƒ¡ãƒ‹ãƒ¥ãƒ¼ */}
        <DropdownMenu
          label="Export"
          items={[
            { label: 'Export STEP', onClick: () => onExport ? onExport('step') : console.log('Export STEP') },
            { label: 'Export STL', onClick: () => onExport ? onExport('stl') : console.log('Export STL') },
            { label: 'Export OBJ', onClick: () => onExport ? onExport('obj') : console.log('Export OBJ') }
          ]}
        />
        
        {/* ãã®ä»–ã®ãƒ¡ãƒ‹ãƒ¥ãƒ¼... */}
      </div>
    </nav>
  );
}
```

### 3. ãƒ•ã‚¡ã‚¤ãƒ«ã‚¨ã‚¯ã‚¹ãƒãƒ¼ãƒˆå®Ÿè£…

```typescript
// ãƒ¯ãƒ¼ã‚«ãƒ¼ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ãƒãƒ³ãƒ‰ãƒ©ãƒ¼ã‚’è¿½åŠ 
useEffect(() => {
  if (!worker || !isWorkerReady) return;

  // STEPãƒ•ã‚¡ã‚¤ãƒ«ã‚¨ã‚¯ã‚¹ãƒãƒ¼ãƒˆå‡¦ç†
  const handleSaveShapeSTEP = (e: MessageEvent) => {
    if (e.data.type === 'saveShapeSTEP' && e.data.payload) {
      const stepContent = e.data.payload;
      const blob = new Blob([stepContent], { type: 'model/step' });
      const url = URL.createObjectURL(blob);
      const link = document.createElement('a');
      link.href = url;
      link.download = 'cascade-model.step';
      link.click();
      URL.revokeObjectURL(url);
      appendConsoleMessage('âœ… STEPãƒ•ã‚¡ã‚¤ãƒ«ã‚’ã‚¨ã‚¯ã‚¹ãƒãƒ¼ãƒˆã—ã¾ã—ãŸ', 'success');
    }
  };

  // STLãƒ•ã‚¡ã‚¤ãƒ«ã‚¨ã‚¯ã‚¹ãƒãƒ¼ãƒˆå‡¦ç†
  const handleSaveShapeSTL = (e: MessageEvent) => {
    if (e.data.type === 'saveShapeSTL' && e.data.payload) {
      const stlContent = e.data.payload;
      const blob = new Blob([stlContent], { type: 'model/stl' });
      const url = URL.createObjectURL(blob);
      const link = document.createElement('a');
      link.href = url;
      link.download = 'cascade-model.stl';
      link.click();
      URL.revokeObjectURL(url);
      appendConsoleMessage('âœ… STLãƒ•ã‚¡ã‚¤ãƒ«ã‚’ã‚¨ã‚¯ã‚¹ãƒãƒ¼ãƒˆã—ã¾ã—ãŸ', 'success');
    }
  };

  // OBJãƒ•ã‚¡ã‚¤ãƒ«ã‚¨ã‚¯ã‚¹ãƒãƒ¼ãƒˆå‡¦ç†
  const handleSaveShapeOBJ = (e: MessageEvent) => {
    if (e.data.type === 'saveShapeOBJ' && e.data.payload) {
      const objContent = e.data.payload;
      const blob = new Blob([objContent], { type: 'model/obj' });
      const url = URL.createObjectURL(blob);
      const link = document.createElement('a');
      link.href = url;
      link.download = 'cascade-model.obj';
      link.click();
      URL.revokeObjectURL(url);
      appendConsoleMessage('âœ… OBJãƒ•ã‚¡ã‚¤ãƒ«ã‚’ã‚¨ã‚¯ã‚¹ãƒãƒ¼ãƒˆã—ã¾ã—ãŸ', 'success');
    }
  };

  // ã‚¤ãƒ™ãƒ³ãƒˆãƒªã‚¹ãƒŠãƒ¼ã‚’ç™»éŒ²
  worker.addEventListener('message', handleSaveShapeSTEP);
  worker.addEventListener('message', handleSaveShapeSTL);
  worker.addEventListener('message', handleSaveShapeOBJ);

  // ã‚¯ãƒªãƒ¼ãƒ³ã‚¢ãƒƒãƒ—
  return () => {
    worker.removeEventListener('message', handleSaveShapeSTEP);
    worker.removeEventListener('message', handleSaveShapeSTL);
    worker.removeEventListener('message', handleSaveShapeOBJ);
  };
}, [worker, isWorkerReady]);
```

## 3. ä»Šå¾Œã®å„ªå…ˆã‚¿ã‚¹ã‚¯

### 3.1 ã‚³ãƒ¼ãƒ‰å“è³ªå‘ä¸Š
- ã‚³ãƒ¼ãƒ‰ãƒªãƒ•ã‚¡ã‚¯ã‚¿ãƒªãƒ³ã‚°
- ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹æœ€é©åŒ–
- ã‚¨ãƒ©ãƒ¼ãƒãƒ³ãƒ‰ãƒªãƒ³ã‚°ã®å¼·åŒ–

### 3.2 ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆæ•´å‚™
- APIãƒªãƒ•ã‚¡ãƒ¬ãƒ³ã‚¹ä½œæˆ
- ä½¿ã„æ–¹ã‚¬ã‚¤ãƒ‰ä½œæˆ
- ã‚µãƒ³ãƒ—ãƒ«ã‚³ãƒ¼ãƒ‰å……å®Ÿ

### 3.3 ãƒ†ã‚¹ãƒˆå¼·åŒ–
- å˜ä½“ãƒ†ã‚¹ãƒˆè¿½åŠ 
- ã‚¨ãƒ³ãƒ‰ãƒ„ãƒ¼ã‚¨ãƒ³ãƒ‰ãƒ†ã‚¹ãƒˆæ‹¡å……
- ã‚¯ãƒ­ã‚¹ãƒ–ãƒ©ã‚¦ã‚¶ãƒ†ã‚¹ãƒˆå¼·åŒ–

## 4. å®Ÿè£…ã‚¹ã‚±ã‚¸ãƒ¥ãƒ¼ãƒ«
1. ã‚³ãƒ¼ãƒ‰å“è³ªå‘ä¸Š (1é€±é–“)
2. ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆæ•´å‚™ (1é€±é–“)
3. ãƒ†ã‚¹ãƒˆå¼·åŒ– (1é€±é–“)
4. æœ€çµ‚ãƒªãƒªãƒ¼ã‚¹æº–å‚™ (1é€±é–“) 