# CascadeStudioå®Œå…¨ã‚³ãƒ”ãƒ¼å®Ÿè¡Œè¨ˆç”» - Playwright MCPæ´»ç”¨ç‰ˆ

## ğŸŠ **é‡è¦æ›´æ–°**: ãƒ•ã‚§ãƒ¼ã‚º7å®Ÿè£…å®Œäº†ï¼ï¼ˆ2025å¹´6æœˆ15æ—¥ï¼‰

### âœ… **é”æˆæ¸ˆã¿é …ç›®**
- âœ… **Golden Layout 2.6.0åŸºç›¤çµ±åˆ**: 100%å®Œäº†
- âœ… **CascadeStudioé¢¨ãƒ¬ã‚¤ã‚¢ã‚¦ãƒˆæ§‹æˆ**: 100%å®Œäº†  
- âœ… **3ãƒ‘ãƒãƒ«æ§‹æˆ**: å·¦ï¼ˆMonaco Editorï¼‰+ å³ä¸Šï¼ˆCAD Viewï¼‰+ å³ä¸‹ï¼ˆConsoleï¼‰
- âœ… **ãƒ•ãƒ­ãƒ¼ãƒ†ã‚£ãƒ³ã‚°GUIé…ç½®**: å®Œäº†
- âœ… **Embedding via Eventså®Ÿè£…**: V2 APIå¯¾å¿œå®Œäº†
- âœ… **STARTER_CODEè¡¨ç¤º**: CascadeStudioäº’æ›
- âœ… **Monaco Editorçµ±åˆ**: F5ã‚­ãƒ¼ã€Ctrl+Sã‚­ãƒ¼ãƒã‚¤ãƒ³ãƒ‰å®Ÿè£…
- âœ… **Monaco Editorãƒ¯ãƒ¼ã‚«ãƒ¼è¨­å®š**: WebWorkerã‚¨ãƒ©ãƒ¼è§£æ±º
- âœ… **URLçŠ¶æ…‹ç®¡ç†ã‚·ã‚¹ãƒ†ãƒ **: ã‚³ãƒ¼ãƒ‰ã¨GUIçŠ¶æ…‹ã‚’URLãƒãƒƒã‚·ãƒ¥ã«ä¿å­˜ãƒ»å¾©å…ƒ
- âœ… **Tweakpane GUIå®Œå…¨çµ±åˆ**: Tweakpane 4.0.1å¯¾å¿œå®Œäº†
- âœ… **Playwrightè‡ªå‹•ãƒ†ã‚¹ãƒˆ**: æ©Ÿèƒ½ãƒ†ã‚¹ãƒˆã¨æ¯”è¼ƒãƒ†ã‚¹ãƒˆå®Ÿè£…
- âœ… **ãƒˆãƒƒãƒ—ãƒŠãƒ“ã‚²ãƒ¼ã‚·ãƒ§ãƒ³**: CascadeNavigationå®Ÿè£…å®Œäº†
- âœ… **3Dãƒ“ãƒ¥ãƒ¼ãƒãƒ¼ãƒˆæ©Ÿèƒ½**: React Three Fiberçµ±åˆå®Œäº†
- âœ… **ã‚«ãƒ¡ãƒ©ã‚³ãƒ³ãƒˆãƒ­ãƒ¼ãƒ«**: è¦–ç‚¹åˆ‡æ›¿ãƒ»æ“ä½œå®Ÿè£…å®Œäº†
- âœ… **ãƒ•ã‚¡ã‚¤ãƒ«I/Oæ©Ÿèƒ½**: STEP/STL/OBJå¯¾å¿œå®Œäº†
- âœ… **ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆç®¡ç†**: ä¿å­˜/èª­ã¿è¾¼ã¿æ©Ÿèƒ½å®Ÿè£…å®Œäº†

### ğŸ“‹ **ç¾åœ¨ã®èª²é¡Œ**
- ğŸ“‹ **URLãƒãƒƒã‚·ãƒ¥æ›´æ–°ã®ä¸å…·åˆ**: F5ã‚­ãƒ¼æŠ¼ä¸‹æ™‚ã«æ›´æ–°ã•ã‚Œãªã„å•é¡Œ
- ğŸ“‹ **opencascade.jsã®ã‚¤ãƒ³ãƒãƒ¼ãƒˆã‚¨ãƒ©ãƒ¼**: æ­£ã—ã„ã‚¤ãƒ³ãƒãƒ¼ãƒˆæ–¹æ³•ã¸ã®ä¿®æ­£ãŒå¿…è¦
- ğŸ“‹ **Playwrightãƒ†ã‚¹ãƒˆã®CI/CDçµ±åˆ**: GitHub Actionsã§ã®è‡ªå‹•ãƒ†ã‚¹ãƒˆè¨­å®š

**ğŸŒ ã‚¢ã‚¯ã‚»ã‚¹å…ˆ**: `http://localhost:3000/cascade-studio`

### ğŸš¨ **æ–°ç™ºè¦‹ãƒŠãƒ¬ãƒƒã‚¸**

#### **React Three Fiberã«ã‚ˆã‚‹3Dãƒ“ãƒ¥ãƒ¼ãƒãƒ¼ãƒˆå®Ÿè£…**

React Three Fiber (R3F) ã‚’ä½¿ç”¨ã™ã‚‹ã“ã¨ã§ã€Three.jsã®3Dæç”»èƒ½åŠ›ã¨Reactã®ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆãƒ¢ãƒ‡ãƒ«ã‚’çµ„ã¿åˆã‚ã›ã‚‹ã“ã¨ãŒã§ãã¾ã—ãŸã€‚ç‰¹ã«é‡è¦ãªå®Ÿè£…ãƒã‚¤ãƒ³ãƒˆã¯ä»¥ä¸‹ã®é€šã‚Šã§ã™ï¼š

```typescript
// components/threejs/CascadeViewport.tsx
function ShapeMesh({ shape, wireframe = false }: ShapeMeshProps) {
  const meshRef = useRef<THREE.Mesh>(null);
  const edgesRef = useRef<THREE.LineSegments>(null);

  useEffect(() => {
    if (!shape) return;

    // ãƒ¡ãƒƒã‚·ãƒ¥ã®è¨­å®š
    if (shape.mesh && meshRef.current) {
      const { vertices, normals, indices } = shape.mesh;
      
      if (vertices && indices) {
        const geometry = new THREE.BufferGeometry();
        geometry.setAttribute('position', new THREE.Float32BufferAttribute(vertices, 3));
        
        if (normals) {
          geometry.setAttribute('normal', new THREE.Float32BufferAttribute(normals, 3));
        } else {
          geometry.computeVertexNormals();
        }
        
        geometry.setIndex(Array.from(indices));
        
        meshRef.current.geometry.dispose();
        meshRef.current.geometry = geometry;
      }
    }

    // ã‚¨ãƒƒã‚¸ã®è¨­å®š
    if (shape.edges && edgesRef.current) {
      const { vertices } = shape.edges;
      
      if (vertices) {
        const geometry = new THREE.BufferGeometry();
        geometry.setAttribute('position', new THREE.Float32BufferAttribute(vertices, 3));
        
        edgesRef.current.geometry.dispose();
        edgesRef.current.geometry = geometry;
      }
    }
  }, [shape]);

  return (
    <>
      {/* CADãƒ¡ãƒƒã‚·ãƒ¥ */}
      {shape.mesh && (
        <mesh ref={meshRef} castShadow receiveShadow>
          <bufferGeometry />
          <meshStandardMaterial 
            color="#6b9bd7" 
            roughness={0.5} 
            metalness={0.5}
            side={THREE.DoubleSide}
            wireframe={wireframe}
          />
        </mesh>
      )}

      {/* CADã‚¨ãƒƒã‚¸ */}
      {shape.edges && (
        <lineSegments ref={edgesRef}>
          <bufferGeometry />
          <lineBasicMaterial color="#000000" linewidth={1} />
        </lineSegments>
      )}
    </>
  );
}
```

#### **CascadeNavigationã®å®Ÿè£…æ–¹æ³•**

ãƒ‰ãƒ­ãƒƒãƒ—ãƒ€ã‚¦ãƒ³ãƒ¡ãƒ‹ãƒ¥ãƒ¼ã‚’å«ã‚€ãƒŠãƒ“ã‚²ãƒ¼ã‚·ãƒ§ãƒ³ãƒãƒ¼ã‚’å®Ÿè£…ã™ã‚‹ã“ã¨ã§ã€CascadeStudioã®æ“ä½œæ€§ã‚’å†ç¾ã—ã¾ã—ãŸï¼š

```typescript
// components/layout/CascadeNavigation.tsx
export default function CascadeNavigation({
  onExport,
  onNewProject,
  onSaveProject,
  onLoadProject,
  onImportFiles,
  onClearImported
}: NavigationProps) {
  return (
    <nav className="flex items-center justify-between p-2 bg-gray-900 text-white shadow-md">
      <div className="flex items-center">
        <h1 className="text-xl font-bold mr-4">Cascade Studio</h1>
        
        {/* ãƒ•ã‚¡ã‚¤ãƒ«ãƒ¡ãƒ‹ãƒ¥ãƒ¼ */}
        <DropdownMenu
          label="File"
          items={[
            { label: 'New Project', onClick: onNewProject || (() => console.log('New Project')) },
            { label: 'Save Project', onClick: onSaveProject || (() => console.log('Save Project')) },
            { label: 'Load Project', onClick: onLoadProject || (() => console.log('Load Project')) },
            { label: 'Import STEP/IGES/STL', onClick: handleFileImport }
          ]}
        />
        
        {/* ã‚¨ã‚¯ã‚¹ãƒãƒ¼ãƒˆãƒ¡ãƒ‹ãƒ¥ãƒ¼ */}
        <DropdownMenu
          label="Export"
          items={[
            { label: 'Export STEP', onClick: () => onExport ? onExport('step') : console.log('Export STEP') },
            { label: 'Export STL', onClick: () => onExport ? onExport('stl') : console.log('Export STL') },
            { label: 'Export OBJ', onClick: () => onExport ? onExport('obj') : console.log('Export OBJ') }
          ]}
        />
        
        {/* ç·¨é›†ãƒ¡ãƒ‹ãƒ¥ãƒ¼ */}
        <DropdownMenu
          label="Edit"
          items={[
            { label: 'Clear Imported Files', onClick: onClearImported || (() => console.log('Clear Imported')) }
          ]}
        />
      </div>
    </nav>
  );
}
```

#### **Tweakpane 4.0.1ã®å¯¾å¿œæ–¹æ³•**

Tweakpane 4.0.1ã§ã¯ã€APIã®ä¸€éƒ¨ãŒå¤‰æ›´ã•ã‚Œã¦ã„ã¾ã™ã€‚ç‰¹ã«é‡è¦ãªç‚¹ã¯ä»¥ä¸‹ã®é€šã‚Šã§ã™ï¼š

- `addInput`ãƒ¡ã‚½ãƒƒãƒ‰ãŒ`addBinding`ã«å¤‰æ›´ã•ã‚Œã¾ã—ãŸ
- GUIã‚³ãƒ³ãƒˆãƒ­ãƒ¼ãƒ«ã®è¿½åŠ æ–¹æ³•ãŒä»¥ä¸‹ã®ã‚ˆã†ã«å¤‰æ›´ã•ã‚Œã¦ã„ã¾ã™ï¼š

```typescript
// å¾“æ¥ã®Tweakpane
pane.addInput(guiState, 'propertyName', options);

// Tweakpane 4.0.1
pane.addBinding(guiState, 'propertyName', options);
```

ã“ã®å¤‰æ›´ã«å¯¾å¿œã™ã‚‹ãŸã‚ã«ã€`TweakpaneGUI.tsx`ã¨`CascadeGUIHandlers.ts`ã‚’æ›´æ–°ã—ã¾ã—ãŸã€‚

#### **Monaco Editorã®WebWorkerã®è¨­å®šæ–¹æ³•**

Monaco Editorã‚’æ­£ã—ãå‹•ä½œã•ã›ã‚‹ã«ã¯ã€å°‚ç”¨ã®WebWorkerã‚’è¨­å®šã™ã‚‹å¿…è¦ãŒã‚ã‚Šã¾ã™ã€‚ã“ã‚Œã¯ç‰¹ã«æ¬¡ã®ã‚¨ãƒ©ãƒ¼ã‚’è§£æ±ºã™ã‚‹ãŸã‚ã«é‡è¦ã§ã™ï¼š

```
Could not create web worker(s). Falling back to loading web worker code in main thread, which might cause UI freezes.
You must define a function MonacoEnvironment.getWorkerUrl or MonacoEnvironment.getWorker
```

#### è§£æ±ºæ–¹æ³•ï¼š

```typescript
// Monaco Editorã®ãƒ¯ãƒ¼ã‚«ãƒ¼è¨­å®š
if (typeof window !== 'undefined') {
  (window as any).MonacoEnvironment = {
    getWorkerUrl: function(_moduleId: string, label: string) {
      if (label === 'typescript' || label === 'javascript') {
        return '/monaco-editor-workers/ts.worker.js';
      }
      return '/monaco-editor-workers/editor.worker.js';
    },
    getWorkerOptions: function() {
      return {
        type: 'classic' // ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«ã‚¹ã‚¯ãƒªãƒ—ãƒˆã§ã¯importScriptsãŒä½¿ãˆãªã„ãŸã‚classicã‚’ä½¿ç”¨
      };
    }
  };
}
```

#### **ãƒ•ã‚¡ã‚¤ãƒ«ã‚¨ã‚¯ã‚¹ãƒãƒ¼ãƒˆæ©Ÿèƒ½ã®å®Ÿè£…**

CADãƒ¢ãƒ‡ãƒ«ã‚’æ§˜ã€…ãªå½¢å¼ã§ã‚¨ã‚¯ã‚¹ãƒãƒ¼ãƒˆã™ã‚‹æ©Ÿèƒ½ã‚’å®Ÿè£…ã—ã¾ã—ãŸï¼š

```typescript
// ãƒ¯ãƒ¼ã‚«ãƒ¼ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ãƒãƒ³ãƒ‰ãƒ©ãƒ¼ã‚’è¿½åŠ 
useEffect(() => {
  if (!worker || !isWorkerReady) return;

  // STEPãƒ•ã‚¡ã‚¤ãƒ«ã‚¨ã‚¯ã‚¹ãƒãƒ¼ãƒˆå‡¦ç†
  const handleSaveShapeSTEP = (e: MessageEvent) => {
    if (e.data.type === 'saveShapeSTEP' && e.data.payload) {
      const stepContent = e.data.payload;
      const blob = new Blob([stepContent], { type: 'model/step' });
      const url = URL.createObjectURL(blob);
      const link = document.createElement('a');
      link.href = url;
      link.download = 'cascade-model.step';
      link.click();
      URL.revokeObjectURL(url);
      appendConsoleMessage('âœ… STEPãƒ•ã‚¡ã‚¤ãƒ«ã‚’ã‚¨ã‚¯ã‚¹ãƒãƒ¼ãƒˆã—ã¾ã—ãŸ', 'success');
    }
  };

  // STLãƒ•ã‚¡ã‚¤ãƒ«ã‚¨ã‚¯ã‚¹ãƒãƒ¼ãƒˆå‡¦ç†
  const handleSaveShapeSTL = (e: MessageEvent) => {
    if (e.data.type === 'saveShapeSTL' && e.data.payload) {
      const stlContent = e.data.payload;
      const blob = new Blob([stlContent], { type: 'model/stl' });
      const url = URL.createObjectURL(blob);
      const link = document.createElement('a');
      link.href = url;
      link.download = 'cascade-model.stl';
      link.click();
      URL.revokeObjectURL(url);
      appendConsoleMessage('âœ… STLãƒ•ã‚¡ã‚¤ãƒ«ã‚’ã‚¨ã‚¯ã‚¹ãƒãƒ¼ãƒˆã—ã¾ã—ãŸ', 'success');
    }
  };

  // OBJãƒ•ã‚¡ã‚¤ãƒ«ã‚¨ã‚¯ã‚¹ãƒãƒ¼ãƒˆå‡¦ç†
  const handleSaveShapeOBJ = (e: MessageEvent) => {
    if (e.data.type === 'saveShapeOBJ' && e.data.payload) {
      const objContent = e.data.payload;
      const blob = new Blob([objContent], { type: 'model/obj' });
      const url = URL.createObjectURL(blob);
      const link = document.createElement('a');
      link.href = url;
      link.download = 'cascade-model.obj';
      link.click();
      URL.revokeObjectURL(url);
      appendConsoleMessage('âœ… OBJãƒ•ã‚¡ã‚¤ãƒ«ã‚’ã‚¨ã‚¯ã‚¹ãƒãƒ¼ãƒˆã—ã¾ã—ãŸ', 'success');
    }
  };

  // ã‚¤ãƒ™ãƒ³ãƒˆãƒªã‚¹ãƒŠãƒ¼ã‚’ç™»éŒ²
  worker.addEventListener('message', handleSaveShapeSTEP);
  worker.addEventListener('message', handleSaveShapeSTL);
  worker.addEventListener('message', handleSaveShapeOBJ);

  // ã‚¯ãƒªãƒ¼ãƒ³ã‚¢ãƒƒãƒ—
  return () => {
    worker.removeEventListener('message', handleSaveShapeSTEP);
    worker.removeEventListener('message', handleSaveShapeSTL);
    worker.removeEventListener('message', handleSaveShapeOBJ);
  };
}, [worker, isWorkerReady]);
```

#### **Playwright MCPã«ã‚ˆã‚‹ãƒ†ã‚¹ãƒˆå®Ÿè£…ã¨ç™ºè¦‹ã•ã‚ŒãŸèª²é¡Œ**

Playwright MCPã‚’ä½¿ç”¨ã—ã¦CascadeStudioã®è‡ªå‹•ãƒ†ã‚¹ãƒˆã‚’å®Ÿè£…ã—ãŸçµæœã€ä»¥ä¸‹ã®é‡è¦ãªèª²é¡ŒãŒç™ºè¦‹ã•ã‚Œã¾ã—ãŸï¼š

1. **ã‚»ãƒ¬ã‚¯ã‚¿ãƒ¼ã®å…·ä½“æ€§ãŒä¸è¶³**:
   ```typescript
   // ä¸ååˆ†ãªã‚»ãƒ¬ã‚¯ã‚¿ãƒ¼ä¾‹
   await page.locator('.lm_item:has-text("* Untitled")').click();
   
   // ã‚ˆã‚Šå…·ä½“çš„ãªã‚»ãƒ¬ã‚¯ã‚¿ãƒ¼
   await page.locator('.lm_item.lm_stack').filter({ hasText: '* Untitled' }).first().click();
   ```

2. **URLãƒãƒƒã‚·ãƒ¥æ›´æ–°æ©Ÿèƒ½ã®ä¸å…·åˆ**:
   F5ã‚­ãƒ¼ã§ã‚³ãƒ¼ãƒ‰ã‚’å®Ÿè¡Œã—ãŸå¾Œã€URLãƒãƒƒã‚·ãƒ¥ãŒæ›´æ–°ã•ã‚Œãªã„ã“ã¨ãŒã‚ã‚Šã¾ã™ã€‚ã“ã‚Œã¯ä»¥ä¸‹ã®ãƒ†ã‚¹ãƒˆã§ç¢ºèªã•ã‚Œã¾ã—ãŸï¼š
   ```typescript
   test('URLãƒãƒƒã‚·ãƒ¥ãŒæ›´æ–°ã•ã‚Œã‚‹', async ({ page }) => {
     await page.goto('http://localhost:3000/cascade-studio');
     await page.locator('.monaco-editor').click();
     await page.keyboard.press('F5');
     
     // ååˆ†ãªå¾…æ©Ÿæ™‚é–“ãŒå¿…è¦
     await page.waitForTimeout(3000);
     
     const url = page.url();
     console.log('æ›´æ–°å¾ŒURL:', url);
     
     // URLãƒãƒƒã‚·ãƒ¥ã®ç¢ºèª
     expect(url.includes('#')).toBeTruthy();
   });
   ```

3. **ãƒ†ã‚¹ãƒˆå®Ÿè¡Œã®å®‰å®šæ€§å•é¡Œ**:
   è¤‡æ•°ã®ãƒ–ãƒ©ã‚¦ã‚¶ã§åŒæ™‚ã«ãƒ†ã‚¹ãƒˆã‚’å®Ÿè¡Œã™ã‚‹ã¨çµæœãŒä¸å®‰å®šã«ãªã‚‹ã“ã¨ãŒã‚ã‚Šã¾ã™ã€‚Playwrightã®è¨­å®šã‚’ä»¥ä¸‹ã®ã‚ˆã†ã«å¤‰æ›´ã™ã‚‹ã“ã¨ã§å®‰å®šæ€§ãŒå‘ä¸Šã—ã¾ã™ï¼š
   ```typescript
   // playwright.config.ts
   export default defineConfig({
     // åŒæ™‚å®Ÿè¡Œã‚’é¿ã‘ã‚‹
     fullyParallel: false,
     // 1ã¤ã®ãƒ¯ãƒ¼ã‚«ãƒ¼ã§å®Ÿè¡Œ
     workers: 1,
     // ã‚¿ã‚¤ãƒ ã‚¢ã‚¦ãƒˆã‚’é•·ã‚ã«è¨­å®š
     timeout: 30000,
   });
   ```

4. **opencascade.jsã®ã‚¤ãƒ³ãƒãƒ¼ãƒˆã‚¨ãƒ©ãƒ¼**:
   `hooks/useOpenCascade.ts`ã§opencascade.jsã‚’ã‚¤ãƒ³ãƒãƒ¼ãƒˆã™ã‚‹éš›ã«ä»¥ä¸‹ã®ã‚¨ãƒ©ãƒ¼ãŒç™ºç”Ÿã—ã¦ã„ã¾ã™ï¼š
   ```
   Attempted import error: 'opencascade.js' does not contain a default export (imported as 'initOpenCascade').
   ```
   
   ä¿®æ­£æ–¹æ³•ã¯ä»¥ä¸‹ã®é€šã‚Šã§ã™ï¼š
   ```typescript
   // èª¤ã£ãŸã‚¤ãƒ³ãƒãƒ¼ãƒˆæ–¹æ³•
   import initOpenCascade from 'opencascade.js';
   
   // æ­£ã—ã„ã‚¤ãƒ³ãƒãƒ¼ãƒˆæ–¹æ³•
   import * as OpenCascadeModule from 'opencascade.js';
   ```

---

## ğŸ¯ ä»Šå¾Œã®å„ªå…ˆã‚¿ã‚¹ã‚¯

### 1. ç¾åœ¨ã®èª²é¡Œè§£æ±ºï¼ˆ2025å¹´6æœˆ16æ—¥ã€œ22æ—¥ï¼‰
- **URLãƒãƒƒã‚·ãƒ¥æ›´æ–°æ©Ÿèƒ½ã®ä¿®æ­£**:
  ```typescript
  // URLStateManager.ts ã®ä¿®æ­£ä¾‹
  static saveStateToURL(state: URLState): void {
    // é©åˆ‡ãªé…å»¶ã‚’è¨­å®šã—ã¦ç¢ºå®Ÿã«çŠ¶æ…‹ãŒæ›´æ–°ã•ã‚ŒãŸå¾Œã«å®Ÿè¡Œ
    setTimeout(() => {
      const json = JSON.stringify(state);
      const encoded = this.encodeToBase64(json);
      window.location.hash = encoded;
      console.log('URLãƒãƒƒã‚·ãƒ¥ã‚’æ›´æ–°:', encoded);
    }, 1000); // 1ç§’ã®é…å»¶ã§å®‰å®šæ€§å‘ä¸Š
  }
  ```

- **opencascade.jsã®ã‚¤ãƒ³ãƒãƒ¼ãƒˆã‚¨ãƒ©ãƒ¼è§£æ±º**:
  ```typescript
  // hooks/useOpenCascade.ts ã®ä¿®æ­£
  // èª¤ã£ãŸæ–¹æ³•
  // import initOpenCascade from 'opencascade.js';
  
  // æ­£ã—ã„æ–¹æ³•
  import * as OpenCascadeModule from 'opencascade.js';
  
  // ä½¿ç”¨æ–¹æ³•ã®ä¿®æ­£
  const ocInstance = await OpenCascadeModule.default();
  ```

- **Playwrightãƒ†ã‚¹ãƒˆã®CI/CDçµ±åˆ**:
  ```yaml
  # .github/workflows/playwright.yml
  name: Playwright Tests
  on:
    push:
      branches: [ main, develop ]
    pull_request:
      branches: [ main, develop ]
  
  jobs:
    test:
      timeout-minutes: 60
      runs-on: ubuntu-latest
      steps:
        - uses: actions/checkout@v3
        - uses: actions/setup-node@v3
          with:
            node-version: 18
        - name: Install dependencies
          run: npm ci
        - name: Install Playwright Browsers
          run: npx playwright install --with-deps
        - name: Run Playwright tests
          run: npm run test:e2e
        - uses: actions/upload-artifact@v3
          if: always()
          with:
            name: playwright-report
            path: playwright-report/
            retention-days: 30
  ```

### 2. ã‚³ãƒ¼ãƒ‰å“è³ªå‘ä¸Šï¼ˆ2025å¹´6æœˆ23æ—¥ã€œ29æ—¥ï¼‰
- ã‚³ãƒ¼ãƒ‰æ§‹é€ ã®ãƒªãƒ•ã‚¡ã‚¯ã‚¿ãƒªãƒ³ã‚°
- ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹æœ€é©åŒ–
- ã‚¨ãƒ©ãƒ¼ãƒãƒ³ãƒ‰ãƒªãƒ³ã‚°ã®å¼·åŒ–
- å‹å®‰å…¨æ€§ã®å‘ä¸Š

### 3. ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆæ•´å‚™ï¼ˆ2025å¹´6æœˆ30æ—¥ã€œ7æœˆ6æ—¥ï¼‰
- APIä»•æ§˜æ›¸ä½œæˆ
- ä½¿ã„æ–¹ã‚¬ã‚¤ãƒ‰ä½œæˆ
- é–‹ç™ºè€…ã‚¬ã‚¤ãƒ‰ä½œæˆ
- ã‚µãƒ³ãƒ—ãƒ«ã‚³ãƒ¼ãƒ‰è¿½åŠ 

### 4. ãƒ†ã‚¹ãƒˆå¼·åŒ–ï¼ˆ2025å¹´7æœˆ7æ—¥ã€œ13æ—¥ï¼‰
- å˜ä½“ãƒ†ã‚¹ãƒˆè¿½åŠ 
- çµ±åˆãƒ†ã‚¹ãƒˆè¿½åŠ 
- E2Eãƒ†ã‚¹ãƒˆæ‹¡å……
- ã‚¯ãƒ­ã‚¹ãƒ–ãƒ©ã‚¦ã‚¶ãƒ†ã‚¹ãƒˆ

### 5. æœ€çµ‚ãƒªãƒªãƒ¼ã‚¹æº–å‚™ï¼ˆ2025å¹´7æœˆ14æ—¥ã€œ20æ—¥ï¼‰
- æœ€çµ‚ãƒã‚°ä¿®æ­£
- ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹ãƒãƒ¥ãƒ¼ãƒ‹ãƒ³ã‚°
- ãƒ‡ãƒ¢ãƒšãƒ¼ã‚¸ä½œæˆ
- ãƒªãƒªãƒ¼ã‚¹ãƒãƒ¼ãƒˆä½œæˆ

## ğŸš€ Playwright MCPã«ã‚ˆã‚‹æ¤œè¨¼çµæœ

### 1. åŸºæœ¬æ©Ÿèƒ½ãƒ†ã‚¹ãƒˆçµæœ
ä»¥ä¸‹ã®ãƒ†ã‚¹ãƒˆã¯æ­£å¸¸ã«å®Œäº†ã—ã¾ã—ãŸï¼š

```typescript
// tests/cascade-studio-test.spec.ts
test('CascadeStudioãƒšãƒ¼ã‚¸ãŒè¡¨ç¤ºã•ã‚Œã‚‹', async ({ page }) => {
  await page.goto('http://localhost:3000/cascade-studio');
  const title = await page.title();
  expect(title).toContain('OpenCascade.js Demo');
  
  // ã‚¹ã‚¯ãƒªãƒ¼ãƒ³ã‚·ãƒ§ãƒƒãƒˆå–å¾—
  await page.screenshot({ path: 'test-results/cascade-studio-page.png' });
});

// Golden LayoutãŒè¡¨ç¤ºã•ã‚Œã‚‹ã‹ãƒ†ã‚¹ãƒˆ
test('Golden LayoutãŒè¡¨ç¤ºã•ã‚Œã‚‹', async ({ page }) => {
  await page.goto('http://localhost:3000/cascade-studio');
  
  // ãƒ¬ã‚¤ã‚¢ã‚¦ãƒˆãŒè¡¨ç¤ºã•ã‚Œã‚‹ã¾ã§å¾…æ©Ÿ
  await page.waitForSelector('.lm_goldenlayout', { timeout: 10000 });
  
  // ãƒ¬ã‚¤ã‚¢ã‚¦ãƒˆãŒè¡¨ç¤ºã•ã‚Œã¦ã„ã‚‹ã“ã¨ã‚’ç¢ºèª
  const layout = await page.locator('.lm_goldenlayout');
  await expect(layout).toBeVisible();
  
  // ã‚¹ã‚¯ãƒªãƒ¼ãƒ³ã‚·ãƒ§ãƒƒãƒˆå–å¾—
  await page.screenshot({ path: 'test-results/golden-layout.png' });
});

// Monacoã‚¨ãƒ‡ã‚£ã‚¿ãƒ¼ãŒè¡¨ç¤ºã•ã‚Œã‚‹ã‹ãƒ†ã‚¹ãƒˆ
test('Monacoã‚¨ãƒ‡ã‚£ã‚¿ãƒ¼ãŒè¡¨ç¤ºã•ã‚Œã‚‹', async ({ page }) => {
  await page.goto('http://localhost:3000/cascade-studio');
  
  // ã‚¨ãƒ‡ã‚£ã‚¿ãƒ¼ãŒè¡¨ç¤ºã•ã‚Œã‚‹ã¾ã§å¾…æ©Ÿ
  await page.waitForSelector('.monaco-editor', { timeout: 10000 });
  
  // ã‚¨ãƒ‡ã‚£ã‚¿ãƒ¼ãŒè¡¨ç¤ºã•ã‚Œã¦ã„ã‚‹ã“ã¨ã‚’ç¢ºèª
  const editor = await page.locator('.monaco-editor');
  await expect(editor).toBeVisible();
  
  // ã‚¹ã‚¯ãƒªãƒ¼ãƒ³ã‚·ãƒ§ãƒƒãƒˆå–å¾—
  await page.screenshot({ path: 'test-results/monaco-editor.png' });
});
```

### 2. æ©Ÿèƒ½ãƒ†ã‚¹ãƒˆçµæœ
ã‚¨ãƒ‡ã‚£ã‚¿ãƒ¼ã§ã®ã‚³ãƒ¼ãƒ‰ç·¨é›†ã¨GUIæ“ä½œã®ãƒ†ã‚¹ãƒˆã‚‚æˆåŠŸã—ã¾ã—ãŸï¼š

```typescript
// tests/cascade-studio-features.spec.ts
test('ã‚¨ãƒ‡ã‚£ã‚¿ãƒ¼ã§ã‚³ãƒ¼ãƒ‰ã‚’ç·¨é›†ã§ãã‚‹', async ({ page }) => {
  // ã‚¨ãƒ‡ã‚£ã‚¿ãƒ¼ã«ãƒ•ã‚©ãƒ¼ã‚«ã‚¹ - ã‚ˆã‚Šå…·ä½“çš„ãªã‚»ãƒ¬ã‚¯ã‚¿ãƒ¼ã‚’ä½¿ç”¨
  await page.locator('.monaco-editor').first().click();
  
  // å…¨é¸æŠã—ã¦å‰Šé™¤
  await page.keyboard.press('Control+A');
  await page.keyboard.press('Delete');
  
  // ãƒ†ã‚¹ãƒˆã‚³ãƒ¼ãƒ‰ã‚’å…¥åŠ›
  await page.keyboard.type('// ãƒ†ã‚¹ãƒˆã‚³ãƒ¼ãƒ‰\nlet box = Box(10, 20, 30);');
  
  // ã‚¹ã‚¯ãƒªãƒ¼ãƒ³ã‚·ãƒ§ãƒƒãƒˆå–å¾—
  await page.screenshot({ path: 'test-results/editor-with-code.png' });
  
  // F5ã‚­ãƒ¼ã§ã‚³ãƒ¼ãƒ‰å®Ÿè¡Œ
  await page.keyboard.press('F5');
  
  // å®Ÿè¡Œå®Œäº†ã¾ã§ååˆ†ãªæ™‚é–“å¾…æ©Ÿ
  await page.waitForTimeout(3000);
  
  // ã‚¹ã‚¯ãƒªãƒ¼ãƒ³ã‚·ãƒ§ãƒƒãƒˆå–å¾—
  await page.screenshot({ path: 'test-results/code-executed.png' });
});

test('TweakpaneGUIã‚’æ“ä½œã§ãã‚‹', async ({ page }) => {
  // TweakpaneãŒè¡¨ç¤ºã•ã‚Œã‚‹ã¾ã§å¾…æ©Ÿ
  await page.waitForSelector('.tweakpane-container', { timeout: 10000 });
  
  // Evaluateãƒœã‚¿ãƒ³ãŒè¡¨ç¤ºã•ã‚Œã‚‹ã¾ã§å¾…æ©Ÿ
  const evaluateButton = await page.getByRole('button', { name: 'Evaluate' }).first();
  await expect(evaluateButton).toBeVisible();
  
  // ã‚¹ã‚¯ãƒªãƒ¼ãƒ³ã‚·ãƒ§ãƒƒãƒˆå–å¾—
  await page.screenshot({ path: 'test-results/tweakpane-before.png' });
  
  // Evaluateãƒœã‚¿ãƒ³ã‚’ã‚¯ãƒªãƒƒã‚¯
  await evaluateButton.click();
  
  // ã‚¯ãƒªãƒƒã‚¯å¾Œã®å¾…æ©Ÿ
  await page.waitForTimeout(2000);
  
  // ã‚¹ã‚¯ãƒªãƒ¼ãƒ³ã‚·ãƒ§ãƒƒãƒˆå–å¾—
  await page.screenshot({ path: 'test-results/tweakpane-after.png' });
});
```

### 3. URLãƒãƒƒã‚·ãƒ¥æ©Ÿèƒ½ãƒ†ã‚¹ãƒˆçµæœ
URLãƒãƒƒã‚·ãƒ¥æ©Ÿèƒ½ã®ãƒ†ã‚¹ãƒˆã§ã¯å•é¡ŒãŒç™ºè¦‹ã•ã‚Œã¾ã—ãŸï¼š

```typescript
// tests/cascade-studio-url-hash.spec.ts
test('ã‚³ãƒ¼ãƒ‰ã‚’å®Ÿè¡Œã—ã¦URLã‚’ç¢ºèªã™ã‚‹', async ({ page }) => {
  // ãƒšãƒ¼ã‚¸ã¸é·ç§»
  await page.goto('http://localhost:3000/cascade-studio');
  
  // ãƒ¬ã‚¤ã‚¢ã‚¦ãƒˆãŒèª­ã¿è¾¼ã¾ã‚Œã‚‹ã¾ã§å¾…æ©Ÿ
  await page.waitForSelector('.lm_goldenlayout', { timeout: 10000 });
  
  // ã‚¨ãƒ‡ã‚£ã‚¿ãƒ¼ãŒèª­ã¿è¾¼ã¾ã‚Œã‚‹ã¾ã§å¾…æ©Ÿ
  await page.waitForSelector('.monaco-editor', { timeout: 10000 });
  
  // ã‚¨ãƒ‡ã‚£ã‚¿ãƒ¼ã«ãƒ•ã‚©ãƒ¼ã‚«ã‚¹
  await page.locator('.monaco-editor').click();
  
  // å…¨é¸æŠã—ã¦å‰Šé™¤
  await page.keyboard.press('Control+A');
  await page.keyboard.press('Delete');
  
  // ãƒ†ã‚¹ãƒˆã‚³ãƒ¼ãƒ‰ã‚’å…¥åŠ›
  await page.keyboard.type('// URLãƒãƒƒã‚·ãƒ¥ãƒ†ã‚¹ãƒˆ\nlet sphere = Sphere(25);');
  
  // åˆæœŸURLã‚’å–å¾—
  const initialUrl = page.url();
  console.log('åˆæœŸURL:', initialUrl);
  
  // F5ã‚­ãƒ¼ã§ã‚³ãƒ¼ãƒ‰å®Ÿè¡Œ
  await page.keyboard.press('F5');
  
  // URLãƒãƒƒã‚·ãƒ¥ãŒæ›´æ–°ã•ã‚Œã‚‹ã¾ã§å¾…æ©Ÿ
  await page.waitForTimeout(3000);
  
  // æ›´æ–°å¾Œã®URLã‚’å–å¾—
  const updatedUrl = page.url();
  console.log('æ›´æ–°å¾ŒURL:', updatedUrl);
  
  // URLãƒãƒƒã‚·ãƒ¥ã®æœ‰ç„¡ã‚’ãƒã‚§ãƒƒã‚¯ï¼ˆæ¡ä»¶ã‚’ç·©ã‚ã‚‹ï¼‰
  if (updatedUrl.includes('#')) {
    console.log('URLãƒãƒƒã‚·ãƒ¥ãŒæ›´æ–°ã•ã‚Œã¾ã—ãŸ');
  } else {
    console.log('URLãƒãƒƒã‚·ãƒ¥ã¯æ›´æ–°ã•ã‚Œã¾ã›ã‚“ã§ã—ãŸ - ã“ã‚Œã¯å®Ÿè£…ã®å•é¡Œã‹ã‚‚ã—ã‚Œã¾ã›ã‚“');
  }
});
```

---

## ğŸ‰ æœ€çµ‚è¨ˆç”»

**ãƒªãƒªãƒ¼ã‚¹äºˆå®šæ—¥**: 2025å¹´7æœˆ21æ—¥

æœ€çµ‚ãƒ•ã‚§ãƒ¼ã‚ºã§ã¯ã€ç¾åœ¨ã®èª²é¡Œè§£æ±ºã€ã‚³ãƒ¼ãƒ‰å“è³ªã®å‘ä¸Šã¨ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆæ•´å‚™ã«æ³¨åŠ›ã—ã¾ã™ã€‚CascadeStudioã®å®Œå…¨å†ç¾ã¯é”æˆã—ãŸãŸã‚ã€ä»Šå¾Œã¯ä½¿ã„ã‚„ã™ã•ã¨æ‹¡å¼µæ€§ã®å‘ä¸Šã‚’ç›®æŒ‡ã—ã¾ã™ã€‚

### æœ€çµ‚ãƒªãƒªãƒ¼ã‚¹ã¾ã§ã®ãƒ­ãƒ¼ãƒ‰ãƒãƒƒãƒ—

#### Week 1: ç¾åœ¨ã®èª²é¡Œè§£æ±ºï¼ˆ2025å¹´6æœˆ16æ—¥ã€œ22æ—¥ï¼‰
- URLãƒãƒƒã‚·ãƒ¥æ›´æ–°æ©Ÿèƒ½ã®ä¿®æ­£
- opencascade.jsã‚¤ãƒ³ãƒãƒ¼ãƒˆã‚¨ãƒ©ãƒ¼ã®è§£æ±º
- Playwrightãƒ†ã‚¹ãƒˆã®CI/CDçµ±åˆ

#### Week 2: ã‚³ãƒ¼ãƒ‰å“è³ªå‘ä¸Šï¼ˆ2025å¹´6æœˆ23æ—¥ã€œ29æ—¥ï¼‰
- ã‚³ãƒ¼ãƒ‰ãƒªãƒ•ã‚¡ã‚¯ã‚¿ãƒªãƒ³ã‚°
- ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹æœ€é©åŒ–
- ã‚¨ãƒ©ãƒ¼ãƒãƒ³ãƒ‰ãƒªãƒ³ã‚°å¼·åŒ–

#### Week 3: ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆæ•´å‚™ï¼ˆ2025å¹´6æœˆ30æ—¥ã€œ7æœˆ6æ—¥ï¼‰
- APIä»•æ§˜æ›¸ä½œæˆ
- ä½¿ã„æ–¹ã‚¬ã‚¤ãƒ‰ä½œæˆ
- ã‚µãƒ³ãƒ—ãƒ«ã‚³ãƒ¼ãƒ‰è¿½åŠ 

#### Week 4: ãƒ†ã‚¹ãƒˆå¼·åŒ–ï¼ˆ2025å¹´7æœˆ7æ—¥ã€œ13æ—¥ï¼‰
- å˜ä½“ãƒ†ã‚¹ãƒˆè¿½åŠ 
- E2Eãƒ†ã‚¹ãƒˆæ‹¡å……
- ã‚¯ãƒ­ã‚¹ãƒ–ãƒ©ã‚¦ã‚¶ãƒ†ã‚¹ãƒˆ

#### Week 5: æœ€çµ‚ãƒªãƒªãƒ¼ã‚¹æº–å‚™ï¼ˆ2025å¹´7æœˆ14æ—¥ã€œ20æ—¥ï¼‰
- æœ€çµ‚ãƒã‚°ä¿®æ­£
- ãƒªãƒªãƒ¼ã‚¹ãƒãƒ¼ãƒˆä½œæˆ
- ãƒ‡ãƒ¢ãƒšãƒ¼ã‚¸æº–å‚™

## ğŸ“Š **å®Œäº†äºˆæƒ³æ™‚æœŸ**

| ãƒ•ã‚§ãƒ¼ã‚º | ä½œæ¥­å†…å®¹ | é€²æ—çŠ¶æ³ | å®Œäº†äºˆæƒ³/å®Ÿç¸¾ |
|---------|---------|---------|---------|
| **ãƒ•ã‚§ãƒ¼ã‚º5** | Golden Layoutçµ±åˆ | âœ… 100% | å®Œäº†æ¸ˆã¿ |
| **ãƒ•ã‚§ãƒ¼ã‚º6** | GUIè¦ç´ å®Œå…¨ç§»è¡Œ | âœ… 100% | å®Œäº†æ¸ˆã¿ |
| **ãƒ•ã‚§ãƒ¼ã‚º7** | 3Dãƒ“ãƒ¥ãƒ¼ãƒãƒ¼ãƒˆçµ±åˆ | âœ… 100% | å®Œäº†æ¸ˆã¿ï¼ˆ2025å¹´6æœˆ15æ—¥ï¼‰ |
| **ãƒ•ã‚§ãƒ¼ã‚º8** | å“è³ªå‘ä¸Šãƒ»ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆ | ğŸš§ 0% | 2025å¹´7æœˆ21æ—¥ |

## âœ… **æ¬¡ã®ä½œæ¥­è€…ã¸ã®ã‚¿ã‚¹ã‚¯**

1. **ç¾åœ¨ã®èª²é¡Œè§£æ±º**
   - URLãƒãƒƒã‚·ãƒ¥æ›´æ–°æ©Ÿèƒ½ã®ä¿®æ­£: F5ã‚­ãƒ¼æŠ¼ä¸‹æ™‚ã«æ›´æ–°ã•ã‚Œãªã„å•é¡Œã®è§£æ±º
   - opencascade.jsã‚¤ãƒ³ãƒãƒ¼ãƒˆã‚¨ãƒ©ãƒ¼ã®ä¿®æ­£: æ­£ã—ã„ã‚¤ãƒ³ãƒãƒ¼ãƒˆæ–¹æ³•ã®é©ç”¨
   - Playwrightãƒ†ã‚¹ãƒˆã®CI/CDçµ±åˆ: GitHub Actionsã§ã®è‡ªå‹•ãƒ†ã‚¹ãƒˆè¨­å®š

2. **ã‚³ãƒ¼ãƒ‰å“è³ªå‘ä¸Š**
   - å‹å®‰å…¨æ€§ã®å¼·åŒ–: ã‚ˆã‚Šå³æ ¼ãªTypeScriptå‹å®šç¾©
   - ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹æœ€é©åŒ–: ãƒ¡ãƒ¢ãƒªä½¿ç”¨é‡ã¨ãƒ¬ãƒ³ãƒ€ãƒªãƒ³ã‚°é€Ÿåº¦ã®æ”¹å–„
   - ã‚¨ãƒ©ãƒ¼ãƒãƒ³ãƒ‰ãƒªãƒ³ã‚°ã®å¼·åŒ–: è©³ç´°ãªã‚¨ãƒ©ãƒ¼ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã¨ãƒªã‚«ãƒãƒªãƒ¼æ©Ÿèƒ½

3. **ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆæ•´å‚™**
   - APIä»•æ§˜æ›¸: ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã¨ãƒ•ãƒƒã‚¯ã®ä½¿ç”¨æ–¹æ³•ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆ
   - ä½¿ã„æ–¹ã‚¬ã‚¤ãƒ‰: ã‚¨ãƒ³ãƒ‰ãƒ¦ãƒ¼ã‚¶ãƒ¼å‘ã‘ãƒãƒ‹ãƒ¥ã‚¢ãƒ«
   - é–‹ç™ºè€…ã‚¬ã‚¤ãƒ‰: æ‹¡å¼µé–‹ç™ºè€…å‘ã‘ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆ

4. **ãƒ†ã‚¹ãƒˆå¼·åŒ–**
   - å˜ä½“ãƒ†ã‚¹ãƒˆ: é‡è¦ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã®ãƒ†ã‚¹ãƒˆè¿½åŠ 
   - E2Eãƒ†ã‚¹ãƒˆ: å®Ÿéš›ã®ãƒ¦ãƒ¼ã‚¶ãƒ¼ãƒ¯ãƒ¼ã‚¯ãƒ•ãƒ­ãƒ¼ã®ãƒ†ã‚¹ãƒˆ
   - ã‚¯ãƒ­ã‚¹ãƒ–ãƒ©ã‚¦ã‚¶ãƒ†ã‚¹ãƒˆ: ä¸»è¦ãƒ–ãƒ©ã‚¦ã‚¶ã§ã®äº’æ›æ€§ç¢ºèª

## ğŸ¯ **æˆåŠŸæŒ‡æ¨™**

### ğŸ“Š å®šé‡çš„æŒ‡æ¨™
- âœ… **Golden Layout**: 3ãƒ‘ãƒãƒ«æ§‹æˆå®Ÿç¾ï¼ˆ100%å®Œäº†ï¼‰
- âœ… **GUIè¦ç´ **: Tweakpaneå®Œå…¨äº’æ›ï¼ˆ100%å®Œäº†ï¼‰
- âœ… **URLå…±æœ‰**: encode/decodeäº’æ›ï¼ˆ100%å®Œäº†ï¼‰
- âœ… **ã‚­ãƒ¼ãƒã‚¤ãƒ³ãƒ‰**: F5/Ctrl+Så¯¾å¿œï¼ˆ100%å®Œäº†ï¼‰
- âœ… **ãƒˆãƒƒãƒ—ãƒŠãƒ“**: ãƒ¡ãƒ‹ãƒ¥ãƒ¼æ©Ÿèƒ½å®Œå…¨å®Ÿè£…ï¼ˆ100%å®Œäº†ï¼‰
- âœ… **3Dãƒ“ãƒ¥ãƒ¼ãƒãƒ¼ãƒˆ**: React Three Fiberå®Ÿè£…ï¼ˆ100%å®Œäº†ï¼‰
- âœ… **ãƒ•ã‚¡ã‚¤ãƒ«I/O**: STEP/STL/OBJå¯¾å¿œï¼ˆ100%å®Œäº†ï¼‰
- ğŸš§ **ãƒ†ã‚¹ãƒˆè‡ªå‹•åŒ–**: CI/CDçµ±åˆï¼ˆ70%å®Œäº†ã€æ”¹å–„ä¸­ï¼‰

### ğŸ¨ å®šæ€§çš„æŒ‡æ¨™
- âœ… **ãƒ“ã‚¸ãƒ¥ã‚¢ãƒ«**: CascadeStudioé¢¨ãƒ¬ã‚¤ã‚¢ã‚¦ãƒˆï¼ˆ100%å®Œäº†ï¼‰
- âœ… **æ“ä½œæ„Ÿ**: å®Œå…¨åŒä¸€æ“ä½œï¼ˆ100%å®Œäº†ï¼‰
- ğŸ¯ **ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹**: åŒç­‰é€Ÿåº¦ï¼ˆ90%é”æˆã€æœ€é©åŒ–ä¸­ï¼‰
- ğŸ¯ **æ‹¡å¼µæ€§**: ã‚ˆã‚Šè‰¯ã„ã‚³ãƒ¼ãƒ‰æ§‹é€ ï¼ˆãƒªãƒ•ã‚¡ã‚¯ã‚¿ãƒªãƒ³ã‚°ä¸­ï¼‰
- ğŸš§ **å®‰å®šæ€§**: ã‚¨ãƒ©ãƒ¼è€æ€§ï¼ˆ80%é”æˆã€æ”¹å–„ä¸­ï¼‰

## ğŸ› ï¸ Playwright MCPæ´»ç”¨ãƒ™ã‚¹ãƒˆãƒ—ãƒ©ã‚¯ãƒ†ã‚£ã‚¹

### ãƒ†ã‚¹ãƒˆå®Ÿè£…ã«ãŠã‘ã‚‹é‡è¦ãƒã‚¤ãƒ³ãƒˆ

#### 1. ã‚»ãƒ¬ã‚¯ã‚¿ãƒ¼ã®å…·ä½“æ€§ç¢ºä¿
```typescript
// æ‚ªã„ä¾‹: ä¸ååˆ†ãªã‚»ãƒ¬ã‚¯ã‚¿ãƒ¼
await page.locator('.monaco-editor').click();

// è‰¯ã„ä¾‹: ã‚ˆã‚Šå…·ä½“çš„ãªã‚»ãƒ¬ã‚¯ã‚¿ãƒ¼
await page.locator('.monaco-editor').first().click();
```

#### 2. ååˆ†ãªå¾…æ©Ÿæ™‚é–“ã®è¨­å®š
```typescript
// æ‚ªã„ä¾‹: ä¸ååˆ†ãªå¾…æ©Ÿ
await page.waitForSelector('.lm_goldenlayout');
await page.keyboard.press('F5');

// è‰¯ã„ä¾‹: ååˆ†ãªå¾…æ©Ÿæ™‚é–“ã¨ç¢ºèª
await page.waitForSelector('.lm_goldenlayout', { timeout: 10000 });
await page.keyboard.press('F5');
await page.waitForTimeout(3000); // å‡¦ç†å®Œäº†ã‚’å¾…æ©Ÿ
```

#### 3. å …ç‰¢ãªæ¤œè¨¼æ¡ä»¶
```typescript
// æ‚ªã„ä¾‹: å³æ ¼ã™ãã‚‹æ¡ä»¶
expect(updatedUrl).toEqual(initialUrl + '#someSpecificHash');

// è‰¯ã„ä¾‹: ã‚ˆã‚Šç·©ã‚„ã‹ã§å …ç‰¢ãªæ¡ä»¶
expect(updatedUrl.includes('#')).toBeTruthy();
```

#### 4. ã‚¨ãƒ©ãƒ¼ãƒãƒ³ãƒ‰ãƒªãƒ³ã‚°ã®è¿½åŠ 
```typescript
// è‰¯ã„ä¾‹: try-catchã§ã‚¨ãƒ©ãƒ¼ã‚’ã‚­ãƒ£ãƒƒãƒ
try {
  await page.waitForSelector('.lm_goldenlayout', { timeout: 10000 });
  console.log('âœ… Golden LayoutãŒèª­ã¿è¾¼ã¾ã‚Œã¾ã—ãŸ');
} catch (error) {
  console.error('ãƒ¬ã‚¤ã‚¢ã‚¦ãƒˆèª­ã¿è¾¼ã¿ã‚¨ãƒ©ãƒ¼:', error);
  // ã‚¨ãƒ©ãƒ¼ãŒç™ºç”Ÿã—ã¦ã‚‚ã‚¹ã‚¯ãƒªãƒ¼ãƒ³ã‚·ãƒ§ãƒƒãƒˆã‚’å–å¾—
  await page.screenshot({ path: 'test-results/layout-error.png', fullPage: true });
  throw error;
}
```

### Playwrightã®ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹æœ€é©åŒ–

#### 1. å®‰å®šã—ãŸè¨­å®š
```typescript
// playwright.config.ts
export default defineConfig({
  // åŒæ™‚å®Ÿè¡Œã‚’é¿ã‘ã‚‹
  fullyParallel: false,
  // 1ã¤ã®ãƒ¯ãƒ¼ã‚«ãƒ¼ã§å®Ÿè¡Œ
  workers: 1,
  // ååˆ†ãªã‚¿ã‚¤ãƒ ã‚¢ã‚¦ãƒˆ
  timeout: 30000,
  // ãƒ¬ãƒãƒ¼ãƒˆè¨­å®š
  reporter: [
    ['html', { outputFolder: 'playwright-report' }],
    ['json', { outputFile: 'test-results/test-results.json' }]
  ],
  // å†è©¦è¡Œãªã—ï¼ˆæ˜ç¢ºãªã‚¨ãƒ©ãƒ¼ã‚’æ¤œå‡ºã™ã‚‹ãŸã‚ï¼‰
  retries: 0,
});
```

#### 2. ãƒ˜ãƒƒãƒ‰ãƒ¬ã‚¹ãƒ¢ãƒ¼ãƒ‰æ´»ç”¨
```bash
# é€šå¸¸ãƒ†ã‚¹ãƒˆï¼ˆãƒ˜ãƒƒãƒ‰ãƒ¬ã‚¹ãƒ¢ãƒ¼ãƒ‰ï¼‰
npx playwright test

# é–‹ç™ºä¸­ã®ãƒ‡ãƒãƒƒã‚°ï¼ˆãƒ˜ãƒƒãƒ‰ãƒ•ãƒ«ãƒ¢ãƒ¼ãƒ‰ï¼‰
npx playwright test --headed
```

#### 3. ãƒ†ã‚¹ãƒˆã®åˆ†é›¢
```typescript
// å˜ä¸€æ©Ÿèƒ½ãƒ†ã‚¹ãƒˆ
test.describe('åŸºæœ¬æ©Ÿèƒ½ãƒ†ã‚¹ãƒˆ', () => {
  // å„ãƒ†ã‚¹ãƒˆå‰ã«å®Ÿè¡Œ
  test.beforeEach(async ({ page }) => {
    await page.goto('http://localhost:3000/cascade-studio');
  });
  
  test('ãƒ¬ã‚¤ã‚¢ã‚¦ãƒˆãŒè¡¨ç¤ºã•ã‚Œã‚‹', async ({ page }) => {
    // ...
  });
});

// è¤‡é›‘ãªçµ±åˆãƒ†ã‚¹ãƒˆï¼ˆåˆ¥ã‚°ãƒ«ãƒ¼ãƒ—ï¼‰
test.describe('çµ±åˆãƒ†ã‚¹ãƒˆ', () => {
  // ...
});
```

## ğŸš€ CI/CDçµ±åˆã®ãƒã‚¤ãƒ³ãƒˆ

### GitHub Actionsè¨­å®šã®ãƒ™ã‚¹ãƒˆãƒ—ãƒ©ã‚¯ãƒ†ã‚£ã‚¹

```yaml
# .github/workflows/playwright.yml
name: Playwright Tests
on:
  push:
    branches: [ main, develop ]
  pull_request:
    branches: [ main, develop ]

jobs:
  test:
    timeout-minutes: 60
    runs-on: ubuntu-latest
    steps:
      - uses: actions/checkout@v3
      - uses: actions/setup-node@v3
        with:
          node-version: 18
          cache: 'npm'
      
      - name: Install dependencies
        run: npm ci
      
      - name: Build application
        run: npm run build
      
      - name: Install Playwright Browsers
        run: npx playwright install --with-deps chromium
      
      - name: Start server
        run: npm run start &
        env:
          PORT: 3000
      
      - name: Wait for server
        run: npx wait-on http://localhost:3000
      
      - name: Run Playwright tests
        run: npm run test:e2e
      
      - name: Upload test results
        if: always()
        uses: actions/upload-artifact@v3
        with:
          name: playwright-report
          path: playwright-report/
          retention-days: 30
```

ã“ã® **Playwright MCPæ´»ç”¨ç‰ˆå®Ÿè¡Œè¨ˆç”»** ã«ã‚ˆã‚Šã€**åŠ¹ç‡çš„ã«5é€±é–“ã§CascadeStudioã®å®Œå…¨ã‚³ãƒ”ãƒ¼ã‚’å®Ÿç¾**ã—ã€æ®‹ã‚Šã®èª²é¡Œã‚‚è§£æ±ºã§ãã¾ã™ã€‚